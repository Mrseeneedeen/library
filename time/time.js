const { DateTime, Interval } = require("luxon");
const moment = require("moment");
const momentTz = require("moment-timezone");

console.log("=== ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà Luxon ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ Moment.js ===\n");

// 1. Immutability
console.log("1. Immutability Test:");
const nowLuxon = DateTime.now();
const nowMoment = moment();

const futureLuxon = nowLuxon.plus({ days: 1 });
const futureMoment = nowMoment.add(1, "days");

console.log("\nLuxon (Immutable):");
console.log("‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°:", nowLuxon.toISO());
console.log("‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà:", futureLuxon.toISO());

console.log("\nMoment (Mutable):");
console.log("‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°:", nowMoment.toISOString(), "(‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á!)");
console.log("‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏°‡πà:", futureMoment.toISOString());

// 2. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
console.log("\n2. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:");
const invalidDateStr = "invalid-date";

console.log("\nLuxon:");
const invalidLuxon = DateTime.fromISO(invalidDateStr);
console.log({
  isValid: invalidLuxon.isValid,
  invalidReason: invalidLuxon.invalidReason,
  invalidExplanation: invalidLuxon.invalidExplanation,
});

console.log("\nMoment:");
const invalidMoment = moment(invalidDateStr);
console.log({
  isValid: invalidMoment.isValid(),
  invalidReason: "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",
});

// 3. ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Object
console.log("\n3. ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Object ‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö:");

console.log("\nLuxon:");
const luxonObj = DateTime.now().toObject();
console.log("To Object:", luxonObj);
console.log("‡πÅ‡∏õ‡∏•‡∏á‡∏Å‡∏•‡∏±‡∏ö:", DateTime.fromObject(luxonObj).toISO());

console.log("\nMoment:");
const momentObj = moment().toObject();
console.log("To Object:", momentObj);
console.log("‡πÅ‡∏õ‡∏•‡∏á‡∏Å‡∏•‡∏±‡∏ö:", moment(momentObj).format());

// 4. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö SQL
console.log("\n4. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö SQL:");
const sqlDate = "2024-03-15 14:30:00";

console.log("\nLuxon:");
const luxonFromSQL = DateTime.fromSQL(sqlDate);
console.log("‡∏à‡∏≤‡∏Å SQL:", luxonFromSQL.toISO());
console.log("‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô SQL:", DateTime.now().toSQL({ includeOffset: false }));

console.log("\nMoment:");
const momentFromSQL = moment(sqlDate);
console.log("‡∏à‡∏≤‡∏Å SQL:", momentFromSQL.format());
console.log("‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô SQL:", moment().format("YYYY-MM-DD HH:mm:ss"));

// 5. ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö
console.log("\n5. ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö:");

console.log("\nLuxon:");
const interval1 = Interval.fromDateTimes(
  DateTime.fromISO("2024-01-01"),
  DateTime.fromISO("2024-06-30")
);
const interval2 = Interval.fromDateTimes(
  DateTime.fromISO("2024-06-01"),
  DateTime.fromISO("2024-12-31")
);
console.log("‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà:", interval1.overlaps(interval2));
console.log("‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö:", interval1.intersection(interval2)?.toString());

console.log("\nMoment:");
const range1 = { start: moment("2024-01-01"), end: moment("2024-06-30") };
const range2 = { start: moment("2024-06-01"), end: moment("2024-12-31") };
console.log(
  "‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà:",
  range1.start <= range2.end && range2.start <= range1.end
);
console.log("‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏±‡∏ö: ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏≠‡∏á");

// 6. Timezone Management
console.log("\n6. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Timezone:");
const zones = ["Asia/Bangkok", "America/New_York", "Europe/London"];

console.log("\nLuxon (‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏ï‡∏£‡∏á‡∏°‡∏≤):");
zones.forEach((zone) => {
  const dt = DateTime.now().setZone(zone);
  console.log(
    `${zone}:`,
    dt.toFormat("HH:mm"),
    `(offset: ${dt.offset / 60} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)`
  );
});

console.log("\nMoment (‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ plugin ‡πÄ‡∏û‡∏¥‡πà‡∏°):");
zones.forEach((zone) => {
  const mt = momentTz.tz(zone);
  console.log(
    `${zone}:`,
    mt.format("HH:mm"),
    `(offset: ${mt.utcOffset() / 60} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)`
  );
});

// 7. Relative Time with Units
console.log("\n7. Relative Time with Units:");
const pastDate = DateTime.now().minus({ days: 3, hours: 5 });
const pastMoment = moment().subtract(3, "days").subtract(5, "hours");

console.log("\nLuxon (‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏Å‡∏ß‡πà‡∏≤):");
console.log("Default:", pastDate.toRelative());
console.log("With Unit 'days':", pastDate.toRelative({ unit: "days" }));
console.log("With Unit 'hours':", pastDate.toRelative({ unit: "hours" }));

console.log("\nMoment (‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏ß‡πà‡∏≤):");
console.log("Default:", pastMoment.fromNow());
console.log("With Duration:", pastMoment.from(moment(), true));

console.log("\n=== ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö ===");

/*
‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ô‡∏µ‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ Luxon ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Å‡∏ß‡πà‡∏≤ Moment.js ‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏î‡πâ‡∏≤‡∏ô:

1. **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: Luxon ‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏° ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à
2. **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î**: Luxon ‡∏ö‡∏≠‡∏Å‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤ ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
3. **‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: Luxon ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤
4. **‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö SQL**: Luxon ‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SQL ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
5. **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤**: Luxon ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏Å‡∏ß‡πà‡∏≤
6. **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏ï‡πÄ‡∏ß‡∏•‡∏≤**: Luxon ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏Ç‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°
7. **‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö**: Luxon ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤

‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡∏≠‡∏á Luxon:
üöÄ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤
üåç ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤
üîÑ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°
üìÖ ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
üîß ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢
üë®‚Äçüíª ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å Moment.js ‡∏ó‡∏µ‡πà‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÅ‡∏•‡πâ‡∏ß)

‡∏™‡∏£‡∏∏‡∏õ: Luxon ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡∏à‡∏≤‡∏Å Moment.js ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô
REF: luxon : https://moment.github.io/luxon/
*/
